<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration | BloodNet</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="title">Create Your Account</div>
    <div class="content">
      <form id="registration-form">
        <div class="user-details">
          <div class="input-box">
            <span class="details">Full Name</span>
            <input type="text" id="full-name" placeholder="Enter your name" required>
          </div>
          <div class="input-box">
            <span class="details">Gender</span>
            <select id="gender" name="gender" required>
              <option value="" disabled selected>Select your gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Prefer not to say">Prefer not to say</option>
            </select>
          </div>
          <div class="input-box">
            <span class="details">Email</span>
            <input type="email" id="email" placeholder="Enter your email" required>
          </div>
          <div class="input-box">
            <span class="details">Phone Number</span>
            <input type="tel" id="phone-number" placeholder="Enter your number" required>
          </div>
          <div class="input-box">
            <span class="details">OTP (Phone)</span>
            <div class="otp-container">
              <input type="text" id="otp" placeholder="Enter OTP">
              <button type="button" class="otp-button">Send OTP</button>
            </div>
          </div>
          <div class="input-box">
            <span class="details">Address Line 1</span>
            <input type="text" id="address-line1" placeholder="Enter your address" required>
          </div>
          <div class="input-box">
            <span class="details">Address Line 2</span>
            <input type="text" id="address-line2" placeholder="Apartment, suite, etc. (optional)">
          </div>
          <div class="input-box">
            <span class="details">City</span>
            <input type="text" id="city" placeholder="Enter your city" required>
          </div>
          <div class="input-box">
            <span class="details">State</span>
            <input type="text" id="state" placeholder="Enter your state" required>
          </div>
          <div class="input-box">
            <span class="details">Postal Code</span>
            <input type="text" id="postal-code" placeholder="Enter your postal code" required>
          </div>
          <div class="input-box">
            <span class="details">Blood Group</span>
            <select id="blood-group" name="blood-group" required>
              <option value="" disabled selected>Select your blood group</option>
              <option value="A+">A+</option>
              <option value="A-">A-</option>
              <option value="B+">B+</option>
              <option value="B-">B-</option>
              <option value="AB+">AB+</option>
              <option value="AB-">AB-</option>
              <option value="O+">O+</option>
              <option value="O-">O-</option>
            </select>
          </div>
          <div class="input-box">
            <span class="details">Password</span>
            <input type="password" id="password" placeholder="Enter your password" required>
          </div>
          <div class="input-box">
            <span class="details">Confirm Password</span>
            <input type="password" id="confirm-password" placeholder="Confirm your password" required>
          </div>
        </div>
        <div class="donation-status">
          <label for="donated">
            <input type="checkbox" name="donation-status" id="donated">
            <span class="checkbox-custom"></span>
            Have you previously donated blood?
          </label>
        </div>
        <div class="button">
          <input type="submit" value="Register">
        </div>
        <div class="login-prompt">
          <p>Already have an account? <a href="login.html">Login here</a></p>
        </div>
      </form>
    </div>
  </div>

  <script>
    document.getElementById("registration-form").addEventListener("submit", function(event) {
      event.preventDefault();

      const scriptUrl = "https://script.google.com/macros/s/AKfycbyFMmJPsrajqKXzh1RurawRvw5SOtXR9H607kueJgttCPG4bEh9GwPuWfMRpHXxehby/exec"; // Replace with your deployed Apps Script URL

      const formData = new FormData();
      formData.append("name", document.getElementById("full-name").value);
      formData.append("gender", document.getElementById("gender").value);
      formData.append("email", document.getElementById("email").value);
      formData.append("phone", document.getElementById("phone-number").value);
      formData.append("address", document.getElementById("address-line1").value + " " + document.getElementById("address-line2").value);
      formData.append("city", document.getElementById("city").value);
      formData.append("state", document.getElementById("state").value);
      formData.append("postalCode", document.getElementById("postal-code").value);
      formData.append("bloodGroup", document.getElementById("blood-group").value);
      formData.append("donated", document.getElementById("donated").checked ? "Yes" : "No");

      fetch(scriptUrl, {
        method: "POST",
        body: formData,
      })
      .then(response => response.text())
      .then(data => {
        alert(data); // Show success message
      })
      .catch(error => {
        console.error("Error:", error);
        alert("Failed to submit registration. Please try again.");
      });
    });
  </script>
</body>
</html>